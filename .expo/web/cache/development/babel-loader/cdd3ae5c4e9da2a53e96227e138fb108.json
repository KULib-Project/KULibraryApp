{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _reactNativeImageHeaderScrollView = require(\"react-native-image-header-scroll-view\");\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _async = _interopRequireDefault(require(\"async\"));\n\nvar _reactNativeSafeAreaContext = require(\"react-native-safe-area-context\");\n\nvar _asyncStorage = _interopRequireDefault(require(\"@react-native-async-storage/async-storage\"));\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\root\\\\repos\\\\summer\\\\KULibraryApp_FE\\\\functions\\\\auth.js\";\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar Auth = function Auth(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = (0, _react.useState)([]),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(false),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      isLoding = _useState4[0],\n      setIsLoding = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(''),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      getValue = _useState6[0],\n      setGetValue = _useState6[1];\n\n  (0, _react.useEffect)(function () {\n    setIsLoding(true);\n\n    _axios.default.get('https://702a81d1-ca4d-4ac5-9bbd-67f5353e46af.mock.pstmn.io/user', {\n      header: {\n        token: '1234'\n      }\n    }).then(function (response) {\n      if (response.status == 201) {\n        console.log('11111');\n\n        _asyncStorage.default.setItem('User', JSON.stringify({\n          id: response.data.userInfo['id'],\n          email: response.data.userInfo['email'],\n          picture: response.data.userInfo['picture']\n        }), function () {\n          console.log('유저정보 저장 완료');\n          console.log(response);\n        });\n\n        navigation.replace('Home');\n      } else {\n        _asyncStorage.default.setItem('user_id', JSON.stringify(response.data.userInfo['id']), function () {\n          console.log('유저정보 저장 완료');\n        });\n\n        navigation.replace('Home');\n      }\n    }).catch(console.error).finally(function () {\n      return setIsLoding(false);\n    });\n  }, []);\n  return _react.default.createElement(_reactNative.View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNative.Button, {\n    color: \"#900124\",\n    title: \"Login with Google\",\n    onPress: function onPress() {\n      return _reactNative.Alert.alert();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }), _react.default.createElement(_reactNative.StatusBar, {\n    style: \"auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }));\n};\n\nvar _default = Auth;\nexports.default = _default;\n\nvar styles = _reactNative.StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    justifyContent: 'center',\n    backgroundColor: 'white',\n    alignItems: \"center\"\n  }\n});","map":{"version":3,"names":["Auth","navigation","useState","data","setData","isLoding","setIsLoding","getValue","setGetValue","useEffect","axios","get","header","token","then","response","status","console","log","AsyncStorage","setItem","JSON","stringify","id","userInfo","email","picture","replace","catch","error","finally","styles","container","Alert","alert","StyleSheet","create","flex","backgroundColor","justifyContent","alignItems"],"sources":["D:/root/repos/summer/KULibraryApp_FE/functions/auth.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  Image,\r\n  StyleSheet,\r\n  Dimensions,\r\n  StatusBar,\r\n  Platform, Button, TouchableOpacity,\r\n  FlatList,\r\n  ActivityIndicator,\r\n  Alert\r\n} from 'react-native';\r\nimport {\r\n  ImageHeaderScrollView,\r\n  TriggeringView,\r\n} from 'react-native-image-header-scroll-view';\r\nimport axios from 'axios';\r\nimport async from \"async\";\r\nimport { SafeAreaView } from \"react-native-safe-area-context\";\r\n\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\n\r\n\r\nconst Auth = ({navigation}) =>{\r\n    const [data,setData]=useState([]);\r\n    const [isLoding,setIsLoding]=useState(false);\r\n    const [getValue, setGetValue] = useState('');\r\n\r\n    useEffect(()=>{\r\n        setIsLoding(true);\r\n        axios.get('https://702a81d1-ca4d-4ac5-9bbd-67f5353e46af.mock.pstmn.io/user',{ \r\n            header:{\r\n                token: '1234',\r\n            },\r\n        })\r\n        .then(function(response){\r\n            if (response.status == 201) {\r\n              ///데이터베이스에 있을 경우 ( 기존 회원 )\r\n              console.log('11111');\r\n              AsyncStorage.setItem(\r\n                'User',\r\n                JSON.stringify({\r\n                  id: response.data.userInfo['id'],\r\n                  email: response.data.userInfo['email'],\r\n                  picture: response.data.userInfo['picture'],\r\n                }),\r\n                () => {\r\n                  console.log('유저정보 저장 완료');\r\n                  console.log(response);\r\n                },\r\n              );\r\n              navigation.replace('Home');\r\n            } else { ///데이터베이스에 없을 경우 ( 신규 회원 )\r\n              AsyncStorage.setItem(\r\n                'user_id',\r\n                JSON.stringify(response.data.userInfo['id']),\r\n                () => {\r\n                  console.log('유저정보 저장 완료');\r\n                },\r\n              );\r\n              navigation.replace('Home');\r\n            }\r\n          })\r\n        .catch(console.error)\r\n        .finally(()=>setIsLoding(false));\r\n    },[]);\r\n\r\n    // const storeData = async tasks => {\r\n    //     try {\r\n    //       // 'tasks' 라는 항목에 tasks 저장\r\n    //       const accessTok = JSON.stringify(data.accessToken)\r\n    //       const userEmail= JSON.stringify(data.userInfo.email)\r\n    //       await AsyncStorage.setItem('accessToken', accessTok);\r\n    //       await AsyncStorage.setItem('email', userEmail);\r\n    //     } catch (e) {\r\n    //       // saving error\r\n    //       console.log(\"saveError\")\r\n    //     }\r\n    //   }\r\n       \r\n      // 자료 불러오기\r\n    //   const getMultiple = async () => {\r\n    //     try {\r\n    //       // 'tasks'항목에 저장된 자료 \r\n    //       const loadedData = await AsyncStorage.getItem(['accessTok','userEmail']).then(\r\n    //         (value) =>\r\n    //           //AsyncStorage returns a promise so adding a callback to get the value\r\n    //           setGetValue(value));\r\n    //       // 자료가 없을 때 에러가 뜨지 않도록 빈객체를 반환하도록 한다\r\n    //       //setTasks(JSON.parse(loadedData) || \"{}\");\r\n    //     } catch(e) {\r\n    //       // error reading value\r\n    //       console.log(\"Error\")\r\n    //     }\r\n    //     console.log(loadedData)\r\n    //   }\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n        \r\n\r\n            <Button color=\"#900124\"\r\n                title=\"Login with Google\"\r\n                onPress={() => Alert.alert()} \r\n            \r\n            />\r\n            {/* <Text>{JSON.stringify(getMultiple)}</Text> */}\r\n            <StatusBar style=\"auto\" />\r\n        </View>\r\n    );\r\n\r\n}\r\nexport default Auth;\r\nconst styles= StyleSheet.create({\r\ncontainer: {\r\n\r\nflex: 1,\r\nbackgroundColor: '#fff',\r\njustifyContent: 'center',\r\nbackgroundColor:'white',\r\nalignItems: \"center\",\r\n},\r\n})"],"mappings":";;;;;;;;;AAAA;;AACA;;AAYA;;AAIA;;AACA;;AACA;;AAEA;;;;;;;;;AAIA,IAAMA,IAAI,GAAG,SAAPA,IAAO,OAAiB;EAAA,IAAfC,UAAe,QAAfA,UAAe;;EAC1B,gBAAqB,IAAAC,eAAA,EAAS,EAAT,CAArB;EAAA;EAAA,IAAOC,IAAP;EAAA,IAAYC,OAAZ;;EACA,iBAA6B,IAAAF,eAAA,EAAS,KAAT,CAA7B;EAAA;EAAA,IAAOG,QAAP;EAAA,IAAgBC,WAAhB;;EACA,iBAAgC,IAAAJ,eAAA,EAAS,EAAT,CAAhC;EAAA;EAAA,IAAOK,QAAP;EAAA,IAAiBC,WAAjB;;EAEA,IAAAC,gBAAA,EAAU,YAAI;IACVH,WAAW,CAAC,IAAD,CAAX;;IACAI,cAAA,CAAMC,GAAN,CAAU,iEAAV,EAA4E;MACxEC,MAAM,EAAC;QACHC,KAAK,EAAE;MADJ;IADiE,CAA5E,EAKCC,IALD,CAKM,UAASC,QAAT,EAAkB;MACpB,IAAIA,QAAQ,CAACC,MAAT,IAAmB,GAAvB,EAA4B;QAE1BC,OAAO,CAACC,GAAR,CAAY,OAAZ;;QACAC,qBAAA,CAAaC,OAAb,CACE,MADF,EAEEC,IAAI,CAACC,SAAL,CAAe;UACbC,EAAE,EAAER,QAAQ,CAACZ,IAAT,CAAcqB,QAAd,CAAuB,IAAvB,CADS;UAEbC,KAAK,EAAEV,QAAQ,CAACZ,IAAT,CAAcqB,QAAd,CAAuB,OAAvB,CAFM;UAGbE,OAAO,EAAEX,QAAQ,CAACZ,IAAT,CAAcqB,QAAd,CAAuB,SAAvB;QAHI,CAAf,CAFF,EAOE,YAAM;UACJP,OAAO,CAACC,GAAR,CAAY,YAAZ;UACAD,OAAO,CAACC,GAAR,CAAYH,QAAZ;QACD,CAVH;;QAYAd,UAAU,CAAC0B,OAAX,CAAmB,MAAnB;MACD,CAhBD,MAgBO;QACLR,qBAAA,CAAaC,OAAb,CACE,SADF,EAEEC,IAAI,CAACC,SAAL,CAAeP,QAAQ,CAACZ,IAAT,CAAcqB,QAAd,CAAuB,IAAvB,CAAf,CAFF,EAGE,YAAM;UACJP,OAAO,CAACC,GAAR,CAAY,YAAZ;QACD,CALH;;QAOAjB,UAAU,CAAC0B,OAAX,CAAmB,MAAnB;MACD;IACF,CAhCH,EAiCCC,KAjCD,CAiCOX,OAAO,CAACY,KAjCf,EAkCCC,OAlCD,CAkCS;MAAA,OAAIxB,WAAW,CAAC,KAAD,CAAf;IAAA,CAlCT;EAmCH,CArCD,EAqCE,EArCF;EAqEA,OACI,6BAAC,iBAAD;IAAM,KAAK,EAAEyB,MAAM,CAACC,SAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAGI,6BAAC,mBAAD;IAAQ,KAAK,EAAC,SAAd;IACI,KAAK,EAAC,mBADV;IAEI,OAAO,EAAE;MAAA,OAAMC,kBAAA,CAAMC,KAAN,EAAN;IAAA,CAFb;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAHJ,EASI,6BAAC,sBAAD;IAAW,KAAK,EAAC,MAAjB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EATJ,CADJ;AAcH,CAxFD;;eAyFelC,I;;;AACf,IAAM+B,MAAM,GAAEI,uBAAA,CAAWC,MAAX,CAAkB;EAChCJ,SAAS,EAAE;IAEXK,IAAI,EAAE,CAFK;IAGXC,eAAe,EAAE,MAHN;IAIXC,cAAc,EAAE,QAJL;IAKXD,eAAe,EAAC,OALL;IAMXE,UAAU,EAAE;EAND;AADqB,CAAlB,CAAd"},"metadata":{},"sourceType":"script"}